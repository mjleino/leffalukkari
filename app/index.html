<!DOCTYPE html>

<html lang="fi">
<head>
	<meta charset="utf-8">
	<title>Espoo Ciné 2016: LEFFALUKKARI</title>

	<link rel="stylesheet" href="css/cine.css">
	<link rel="stylesheet" href="css/vxxb.css">

	<script type="text/javascript" src="js/dist/angular-etc.min.js"></script>
	<script type="text/javascript" src="js/dist/angular-locale_fi-fi.js"></script>
	<script type="text/javascript" src="js/vxxb.js"></script>
</head>

<body>
	<div id="ng-controller" ng-app="appLeffalukkari" ng-controller="FilmListController">
		<nav id="day-nav">
			<ul>
				<li ng-repeat="day in data.days"
					du-scrollspy="{{ day.id }}">
					<a href="#{{ day.id }}" du-smooth-scroll>
						<time datetime="{{ day.date }}">{{ day.date | date:"EEE d" }}</time>
					</a>
				</li>
				<li id="search-film">
					<input id="search" type="search" placeholder="{{ i18n.searchfilm }}…" aria-label="{{ i18n.searchfilm }}" ng-model="search.text">
				</li>
				<li id="help" ng-class="{active: search.help, share: search.fbshare}">
					<a href="#help" title="ohje / help" ng-click="help(); $event.preventDefault()">?</a>
					<aside>
						<section class="direct" ng-bind-html="i18n.help.join('')"></section>
						<section class="share" ng-bind-html="i18n.helpshare.join('')"></section>
						<p><a href="#help" ng-click="help(); $event.preventDefault()">O K</a></p>
					</aside>
				</li>
				<li id="fb-share">
					<a href="#" title="{{ i18n.fbshare }}" ng-click="doFbShare(); $event.preventDefault();">
						{{ i18n.share }} <img src="img/facebook.png" alt="facebook logo">
					</a>
				</li>
				<li id="my-festival" ng-class="{active: search.myfestival}">
					<a href="#" title="{{ i18n.myfestivalwhat }} ({{ $storage.selected | count }} {{ i18n.selectedscreenings }})" ng-click="myFestival(); $event.preventDefault();">{{ i18n.myfestival }} ({{ $storage.selected | count }})</a>
				</li>
			</ul>
		</nav>

		<table id="FilmList">
			<tbody id="{{ day.id }}" ng-repeat="day in data.days"
				   ng-show="(data.screenings | filter:{ dateId: day.id } | filter:myFestivalCheck | filter:searchCheck).length">
				<tr class="day">
					<th colspan="7">
						<h2>
							<time datetime="{{ day.date }}">{{ day.date | date:"EEE d.M." }}</time>
						</h2>
					</th>
				</tr>
				<tr class="theater">
					<th></th>
					<th ng-repeat="theater in data.config.theaters">
						<h3>{{ i18n.theaters[theater] || theater }}</h3>
					</th>
				</tr>
				<tr class="slot" ng-repeat="(slot, timeslot) in day.timeslots"
					ng-if="(timeslot | timeslotnugger | filter:myFestivalCheck | filter:searchCheck).length">
					<th class="slot{{ slot }}" ng-style="{ height: timeslot.duration * 1.5 + 'px' }">
						<h2>
							<time datetime="{{ timeslot.time }}">{{ slot }}</time>
						</h2>
					</th>
					<td ng-repeat="theater in timeslot.theaters">
						<screening ng-if="screeningId" ng-repeat="screeningId in theater | filter:myFestivalCheck | filter:searchCheck track by screeningId" ng-init="screening=data.screeningsById[screeningId]">
						</screening>
					</td>
				</tr>
			</tbody>
		</table>

		<p id="viiksipojat"><span>Leffalukkarin sinulle teki ❤:lla</span> <a href="http://viiksipojat.fi" target="_blank" onclick="ga('send', 'event', 'click', 'viiksipojat.fi')">Viiksipojat</a>.</p>

		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

		  ga('create', 'UA-65899235-2', 'auto');
		  ga('send', 'pageview', location.pathname + location.search + location.hash);
		</script>

		<script>
		  window.fbAsyncInit = function() {
		    FB.init({
		      appId      : '1207489822615275',
		      // status     : true,
		      xfbml      : true,
		      version    : 'v2.7'
		    });
		  };

		  (function(d, s, id){
		     var js, fjs = d.getElementsByTagName(s)[0];
		     if (d.getElementById(id)) {return;}
		     js = d.createElement(s); js.id = id;
		     js.src = "//connect.facebook.net/en_US/sdk.js";
		     fjs.parentNode.insertBefore(js, fjs);
		   }(document, 'script', 'facebook-jssdk'));
		</script>
	</div>
</body>
</html>
