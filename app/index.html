<!DOCTYPE html>

<html lang="fi">
<head>
	<meta charset="utf-8">
	<title>Espoo Ciné 2015: LEFFALUKKARI</title>

	<!-- <link rel="stylesheet" href="css/bootstrap.min.css"> -->
	<link rel="stylesheet" href="http://www.espoocine.fi/2015/fi/StyleSheet/51.css">
	<link rel="stylesheet" href="css/vxxb.css">

	<script type="text/javascript" src="js/angular-etc.min.js"></script>
	<script type="text/javascript" src="js/vxxb.js"></script>
</head>

<body>
	<div id="ng-controller" ng-app="leffalukkari" ng-controller="FilmListCtrl" class="container-fluid">
		<!-- http://stackoverflow.com/questions/18838964/add-bootstrap-glyphicon-to-input-box -->
		<h1>ESPOO CINÉ 2015</h1>

		<nav id="day-nav">
			<ul du-scroll-container="FilmListBody">
				<li ng-repeat="day in data.days" ng-class="{active: $first}"
					du-scrollspy="{{ day.id }}">
					<a href="#{{ day.id }}" du-smooth-scroll>
						<time datetime="{{ day.date }}">{{ day.date | date:"EEE d.M." }}</time>
					</a>
				</li>
				<li id="search-film">
					<input id="search" type="search" placeholder="Etsi elokuvaa…" aria-label="Etsi elokuvaa" ng-model="search.text">
				</li>
			</ul>
		</nav>

		<table id="FilmList">
			<!-- <caption>{{day.label}}</caption> -->
			<thead>
				<tr>
					<th>klo</th>
					<th ng-repeat="theater in theaters">{{theater}}</th>
				</tr>
			</thead>
			<!-- TODO: think about this -->
			<tbody id="FilmListBody">
				<tr id="{{ day.id }}" class="day" ng-repeat-start="day in data.days">
					<th colspan="7">
						<h3>
							<time datetime="{{ day.date }}">{{ day.date | date:"EEE d.M." }}</time>
						</h3>
					</th>
				</tr>
				<!-- TODO: optimize this -->
				<tr class="slot" ng-show="(screenings | filter:{dateId:day.id, timeslot:slot} | filter:{title: search.text}).length"
					ng-repeat="(slot, timeslot) in day.timeslots" ng-repeat-end>
					<th class="slot{{ slot }}">
						<time datetime="{{ timeslot.time}}">{{ slot }}</time>
					</th>
					<td ng-repeat="theater in timeslot.theaters">
						<screening ng-repeat="screening in theater.screenings | filter:search.text | orderBy:'time'">
						</screening>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
</html>
